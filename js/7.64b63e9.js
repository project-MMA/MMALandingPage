(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"0tVQ":function(t,e,n){n("FlQf"),n("VJsP"),t.exports=n("WEpk").Array.from},"6OjY":function(t,e,n){"use strict";var a=n("v2Kx"),i=n.n(a);i.a},Bnag:function(t,e){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}t.exports=n},EbDI:function(t,e,n){var a=n("Kgbp"),i=n("iD3k");function r(t){if(i(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return a(t)}t.exports=r},IP1Z:function(t,e,n){"use strict";var a=n("2faE"),i=n("rr1i");t.exports=function(t,e,n){e in t?a.f(t,e,i(0,n)):t[e]=n}},Ijbi:function(t,e){function n(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}t.exports=n},Kgbp:function(t,e,n){t.exports=n("0tVQ")},NwJ3:function(t,e,n){var a=n("SBuE"),i=n("UWiX")("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(a.Array===t||r[i]===t)}},RIqP:function(t,e,n){var a=n("Ijbi"),i=n("EbDI"),r=n("Bnag");function s(t){return a(t)||i(t)||r()}t.exports=s},TuGD:function(t,e,n){var a=n("UWiX")("iterator"),i=!1;try{var r=[7][a]();r["return"]=function(){i=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var r=[7],s=r[a]();s.next=function(){return{done:n=!0}},r[a]=function(){return s},t(r)}catch(t){}return n}},VJsP:function(t,e,n){"use strict";var a=n("2GTP"),i=n("Y7ZC"),r=n("JB68"),s=n("sNwI"),o=n("NwJ3"),c=n("tEej"),u=n("IP1Z"),l=n("fNZA");i(i.S+i.F*!n("TuGD")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,d,h=r(t),f="function"==typeof this?this:Array,m=arguments.length,p=m>1?arguments[1]:void 0,v=void 0!==p,g=0,y=l(h);if(v&&(p=a(p,m>2?arguments[2]:void 0,2)),void 0==y||f==Array&&o(y))for(e=c(h.length),n=new f(e);e>g;g++)u(n,g,v?p(h[g],g):h[g]);else for(d=y.call(h),n=new f;!(i=d.next()).done;g++)u(n,g,v?s(d,p,[i.value,g],!0):i.value);return n.length=g,n}})},VKFn:function(t,e,n){n("bBy9"),n("FlQf"),t.exports=n("ldVq")},iD3k:function(t,e,n){t.exports=n("VKFn")},ldVq:function(t,e,n){var a=n("QMMT"),i=n("UWiX")("iterator"),r=n("SBuE");t.exports=n("WEpk").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||r.hasOwnProperty(a(e))}},sLzr:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"flex flex-center"},[n("div",{staticStyle:{width:"auto","max-width":"100vw"}},[n("div",{staticClass:"container flex flex-center row q-pa-lg q-ma-md",staticStyle:{"background-color":"rgba(255, 255, 255, 0.8)","border-radius":"20px",height:"auto"}},[n("q-list",{staticClass:"bg-white",attrs:{highlight:""}},[0===t.CheckOutdated.length&&!0!==t.showDueDates?n("q-item",{attrs:{link:""}},[n("q-item-side",{attrs:{icon:"notifications",inverted:"",color:"faded"}}),n("q-item-main",[n("q-item-tile",{staticClass:"capitalize",attrs:{label:""}},[t._v("No Notifications To Show")]),n("q-item-tile",{attrs:{sublabel:""}})],1),n("q-item-side",{attrs:{right:"",icon:"info",color:"faded"}})],1):t._e(),t.showDueDates?n("q-list-header",{attrs:{inset:""}},[t._v("Payment Due Dates")]):t._e(),t._l(t.getOutStandingBalance,function(e){return t.showDueDates?n("q-item",{key:e[".key"],attrs:{link:""}},[n("q-item-side",{attrs:{icon:"payment",inverted:"",color:"red"}}),n("q-item-main",[n("q-item-tile",{staticClass:"capitalize",attrs:{label:""}},[t._v(t._s(e.type)+" - â‚± "+t._s(e.amount))]),n("q-item-tile",{attrs:{sublabel:""}},[t._v(t._s(t.$moment(e.endDate).format("dddd"))+", "+t._s(t.$moment(e.endDate).format("LL")))])],1),n("q-item-side",{attrs:{right:"",icon:"info",color:"faded"}})],1):t._e()}),0!==t.CheckOutdated.length?n("q-list-header",{attrs:{inset:""}},[t._v("New Notifications")]):t._e(),t._l(t.CheckOutdated,function(e){return n("div",{key:e[".key"],on:{click:function(n){t.scheduleDetails(e)}}},[n("q-item",{attrs:{link:"",sparse:""}},[n("q-item-side",{attrs:{icon:"event_note",inverted:"",color:t.returnColor(e)}}),n("q-item-main",[n("q-item-tile",{staticClass:"capitalize",attrs:{label:""}},[t._v(t._s(e.type)+" "),t.returnRescheduled(e)?n("b",{staticClass:"q-chip q-caption bg-dark text-white"},[t._v(t._s(t.returnRescheduled(e)))]):t._e()]),n("q-item-tile",{attrs:{sublabel:""}},[t._v(t._s(t.$moment(e.startDate).format("dddd"))+", "+t._s(t.$moment(e.startDate).format("LL")))])],1),n("q-item-side",{attrs:{right:"",icon:"info",color:t.returnColor(e)}})],1)],1)})],2)],1)]),n("q-modal",{attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"},maximized:""},model:{value:t.scheduleModal,callback:function(e){t.scheduleModal=e},expression:"scheduleModal"}},[n("q-modal-layout",{staticClass:"text-center"},[n("q-toolbar",{attrs:{slot:"header",color:"dark"},slot:"header"},[n("q-btn",{staticClass:"fixed-right q-ma-sm",attrs:{flat:"",round:"",dense:"",icon:"clear"},on:{click:function(e){t.scheduleModal=!1}}}),n("q-toolbar-title",[n("span",{staticClass:"capitalize"},[t._v(t._s(t.selectedSchedule.type))])])],1),n("div",{staticClass:"absolute-center row modal_size text-center q-pa-md q-mt-lg"},[n("div",{staticClass:"col-12 q-mt-md"},[n("q-icon",{staticClass:"q-display-1",attrs:{name:"access_time"}}),n("span",{},[t._v("\n             "+t._s(t.$moment(t.selectedSchedule.startDate).format("dddd"))+", "+t._s(t.$moment(t.selectedSchedule.startDate).format("LL"))+"\n           ")]),n("br",{staticClass:"hide-desktop"}),n("q-icon",{staticClass:"q-display-1",attrs:{name:"access_time"}}),n("span",{staticClass:"uppercase"},[t._v("\n           ( "+t._s(t.$moment(t.selectedSchedule.startDate).format("LT"))+" )\n           ")])],1),""!==t.selectedSchedule.details?n("div",{staticClass:"col-12"},[n("q-icon",{staticClass:"q-display-1",attrs:{name:"notes"}}),n("span",{staticClass:"capitalize"},[t._v("\n             "+t._s(t.selectedSchedule.details)+"\n           ")])],1):t._e(),t.hideLocation?n("div",{staticClass:"col-12"},[n("q-icon",{staticClass:"q-display-1",attrs:{name:"location_on"}}),n("span",{staticClass:"uppercase"},[t._v("\n             "+t._s(t.selectedSchedule.location)+"\n           ")])],1):t._e(),t.hideLocation?n("div",{staticClass:"mapouter col-12"},[n("div",{staticClass:"gmap_canvas"},[n("iframe",{attrs:{width:"600",height:"500",id:"gmap_canvas",src:"https://maps.google.com/maps?q="+t.locationRecode+"&t=&z=13&ie=UTF8&iwloc=&output=embed",frameborder:"0",scrolling:"no",marginheight:"0",marginwidth:"0"}}),n("a",{attrs:{href:"https://www.embedgooglemap.net"}})])]):t._e()])],1)],1)],1)},i=[];a._withStripped=!0;var r=n("RIqP"),s=n.n(r),o=n("9JDm"),c={name:"ModelNotification",data:function(){return{progress:50,accountNumber:"",contractsigned:[],event_schedules1:[],scheduleModal:!1,selectedSchedule:{}}},created:function(){this.$bindAsArray("contractsigned",this.$database.ref("contractSigned")),this.accountNumber=this.$route.params.id},mounted:function(){this.$bindAsArray("event_schedules1",this.$database.ref("event_schedules"))},computed:{getAccountNumber:function(){try{return this.$route.params.id}catch(t){return""}},getModelInfo:function(){var t=this;try{var e=this.$lodash.filter(this.contractsigned,function(e){return e.accountNumber===t.getAccountNumber});return e[0]}catch(t){return[]}},getDuePayments:function(){try{return this.getModelInfo.paymentDueDate}catch(t){return[]}},get1stPaidAmount:function(){return this.getDuePayments[0].amount},get2ndPaidAmount:function(){return this.getDuePayments[1].amount},get3rdPaidAmount:function(){return this.getDuePayments[2].amount},getDuePaymentsTotal:function(){try{for(var t=this.getDuePayments,e=0,n=0;n<t.length;n++)e+=t[n].amount;return e}catch(t){return 0}},getDuePaymentsOB:function(){var t=this;try{this.$bindAsArray("temporary",this.$database.ref("contractSigned"));var e=this.$lodash.filter(this.temporary,function(e){return e.accountNumber===t.getAccountNumber});return e[0].paymentDueDate}catch(t){return[]}},getModelsPaymentTransactions:function(){try{var t=this.getModelInfo[".key"];this.$bindAsArray("payment_transactions",this.$database.ref("payment_transactions"));var e=this.$lodash.filter(this.payment_transactions,function(e){return e.modelKey===t});return e}catch(t){return console.log("error",t),[]}},getTotalModelPayment:function(){try{for(var t=this.getModelsPaymentTransactions,e=0,n=0;n<t.length;n++)e+=parseInt(t[n].transaction_amount);return e}catch(t){return console.log(t),0}},get1stPaidStatus:function(){return this.getDuePayments[0].paidStatus},get2ndPaidStatus:function(){return this.getDuePayments[1].paidStatus},get3rdPaidStatus:function(){return this.getDuePayments[2].paidStatus},getActivies:function(){var t=this,e=this.getModelInfo.balance,n=this.$lodash.filter(this.getModelInfo.activitiesAttended,function(n){if(0===e)return"orientation"===n.type?0:n;if("orientation"===n.type)return 0;if("photoshoot"===n.type){if(!0===t.get1stPaidStatus)return n}else if("photoliking"===n.type){if(!0===t.get2ndPaidStatus)return n}else if(!0===t.get3rdPaidStatus)return n});return n},getCountNotification:function(){return this.getActivies.length},getUnpaid:function(){var t=this.$lodash.filter(this.getDuePayments,function(t){return!0!==t.paidStatus?t:0});return t},showDueDates:function(){try{var t=this.getModelInfo.balance;return 0!==t}catch(t){return 0}},locationRecode:function(){try{var t=this.selectedSchedule.location;return t=encodeURIComponent(t.trim()),t}catch(t){return""}},hideLocation:function(){var t=this.selectedSchedule.location;return""!==t},getActivitiesFromBatchKey:function(){try{var t=this.getModelInfo.balance,e=this.getModelInfo.batchKey;this.$bindAsArray("event_schedules1",this.$database.ref("event_schedules"));var n=this.$lodash.filter(this.event_schedules1,function(t){return t[".key"]===e}),a=[],i=[],r=(this.$lodash.filter(n[0].activities,function(t){"payment"===t.type||"orientation"===t.type?a.push(t):i.push(t)}),this.$lodash.filter(i,function(e){return 0===t?"orientation"===e.type?0:e:"orientation"===e.type?0:"photoshoot"===e.type?totalpaid>=D1?e:0:"photoliking"===e.type?totalpaid>=D1+D2?e:0:totalpaid>=D1+D2+D3?e:0}));return r}catch(t){return[]}},CheckRescheduled:function(){try{for(var t=this.$lodash.filter(this.getModelInfo.rescheduledActivity,function(t){return t}),e=[],n=[],a=s()(this.getActivitiesFromBatchKey),i=0;i<t.length;i++)for(var r=0;r<this.event_schedules1.length;r++)t[i].batchKey===this.event_schedules1[r][".key"]?e.push(this.event_schedules1[r]):n.push(this.event_schedules1[r]);for(var o=0;o<e.length;o++)for(var c=0;c<e[o].activities.length;c++)t[o].newActivityID===e[o].activities[c].id?(e[o].activities[c].rescheduled=!0,a.push(e[o].activities[c])):n.push(e[o].activities[c]);var u=this.$lodash.orderBy(a,function(t){return new Date(t.startDate)},"asc");return u}catch(t){return[]}},CheckOutdated:function(){for(var t=this.CheckRescheduled,e=new Date,n=[],a=[],i=[],r=0;r<t.length;r++){var s=new Date(t[r].startDate),c=o["d"].getDateDiff(s,e);c<0?a.push(t[r]):c<7?n.push(t[r]):i.push(t[r])}return n},getOutStandingBalance:function(){try{for(var t=this.getDuePaymentsOB,e=this.getTotalModelPayment,n=[],a=[],i=0,r=0;r<t.length;r++)if(i+=t[r].amount,e>=i)a.push(t[r]);else{var s=i-e;s>t[r].amount?n.push(t[r]):(t[r].amount=s,n.push(t[r]))}return n}catch(t){return console.log(t),[]}}},methods:{scheduleDetails:function(t){this.selectedSchedule=t,this.scheduleModal=!0},returnColor:function(t){try{var e=t;return!0===e.rescheduled?"warning":"primary"}catch(t){return""}},returnRescheduled:function(t){var e=t;return!0===e.rescheduled?"Rescheduled Activity":0}}},u=c,l=(n("6OjY"),n("KHd+")),d=Object(l["a"])(u,a,i,!1,null,null,null);e["default"]=d.exports},sNwI:function(t,e,n){var a=n("5K7Z");t.exports=function(t,e,n,i){try{return i?e(a(n)[0],n[1]):e(n)}catch(e){var r=t["return"];throw void 0!==r&&a(r.call(t)),e}}},v2Kx:function(t,e,n){}}]);